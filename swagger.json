{
  "openapi": "3.0.0",
  "info": {
    "title": "Omni Sales SaaS Platform API",
    "version": "1.0.0",
    "description": "Comprehensive API for omnichannel sales management platform with CRM, loyalty, SMS, email, segmentation, and recommendations",
    "contact": {
      "name": "API Support"
    }
  },
  "servers": [
    {
      "url": "http://localhost:3000/api",
      "description": "Local development server"
    },
    {
      "url": "https://api.omnisales.com/api",
      "description": "Production server"
    }
  ],
  "components": {
    "securitySchemes": {
      "bearerAuth": {
        "type": "http",
        "scheme": "bearer",
        "bearerFormat": "JWT"
      }
    }
  },
  "paths": {
    "/loyalty/tiers": {
      "get": {
        "summary": "Get all loyalty tiers",
        "tags": ["Loyalty & Rewards"],
        "parameters": [
          {
            "name": "userId",
            "in": "query",
            "required": true,
            "schema": { "type": "string" }
          }
        ],
        "responses": {
          "200": {
            "description": "List of loyalty tiers",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": { "type": "array" },
                    "total": { "type": "integer" }
                  }
                }
              }
            }
          }
        }
      },
      "post": {
        "summary": "Create a new loyalty tier",
        "tags": ["Loyalty & Rewards"],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "userId": { "type": "string" },
                  "tierName": { "type": "string" },
                  "requiredPoints": { "type": "number" },
                  "discountPercentage": { "type": "number" }
                }
              }
            }
          }
        },
        "responses": {
          "201": { "description": "Tier created successfully" }
        }
      }
    },
    "/loyalty/points": {
      "post": {
        "summary": "Award loyalty points to customer",
        "tags": ["Loyalty & Rewards"],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "userId": { "type": "string" },
                  "customerId": { "type": "string" },
                  "points": { "type": "number" },
                  "reason": { "type": "string" }
                }
              }
            }
          }
        },
        "responses": {
          "201": { "description": "Points awarded" }
        }
      }
    },
    "/loyalty/rewards": {
      "get": {
        "summary": "Get available rewards",
        "tags": ["Loyalty & Rewards"],
        "parameters": [
          {
            "name": "userId",
            "in": "query",
            "required": true,
            "schema": { "type": "string" }
          }
        ],
        "responses": {
          "200": { "description": "List of rewards" }
        }
      },
      "post": {
        "summary": "Redeem a reward",
        "tags": ["Loyalty & Rewards"],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "userId": { "type": "string" },
                  "customerId": { "type": "string" },
                  "rewardId": { "type": "string" }
                }
              }
            }
          }
        },
        "responses": {
          "200": { "description": "Reward redeemed" }
        }
      }
    },
    "/sms/send": {
      "post": {
        "summary": "Send SMS message",
        "tags": ["SMS Notifications"],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "userId": { "type": "string" },
                  "phoneNumber": { "type": "string" },
                  "messageContent": { "type": "string" },
                  "messageType": { "type": "string" },
                  "customerId": { "type": "string" }
                }
              }
            }
          }
        },
        "responses": {
          "201": { "description": "SMS queued for sending" }
        }
      }
    },
    "/sms/templates": {
      "get": {
        "summary": "Get SMS templates",
        "tags": ["SMS Notifications"],
        "parameters": [
          {
            "name": "userId",
            "in": "query",
            "required": true,
            "schema": { "type": "string" }
          }
        ],
        "responses": {
          "200": { "description": "List of SMS templates" }
        }
      },
      "post": {
        "summary": "Create SMS template",
        "tags": ["SMS Notifications"],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "userId": { "type": "string" },
                  "templateName": { "type": "string" },
                  "templateContent": { "type": "string" }
                }
              }
            }
          }
        },
        "responses": {
          "201": { "description": "Template created" }
        }
      }
    },
    "/sms/analytics": {
      "get": {
        "summary": "Get SMS analytics",
        "tags": ["SMS Notifications"],
        "parameters": [
          {
            "name": "userId",
            "in": "query",
            "required": true,
            "schema": { "type": "string" }
          },
          {
            "name": "days",
            "in": "query",
            "schema": { "type": "integer", "default": 30 }
          }
        ],
        "responses": {
          "200": { "description": "SMS analytics data" }
        }
      }
    },
    "/email/templates": {
      "get": {
        "summary": "Get email templates",
        "tags": ["Email Marketing"],
        "parameters": [
          {
            "name": "userId",
            "in": "query",
            "required": true,
            "schema": { "type": "string" }
          }
        ],
        "responses": {
          "200": { "description": "List of email templates" }
        }
      },
      "post": {
        "summary": "Create email template",
        "tags": ["Email Marketing"],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "userId": { "type": "string" },
                  "templateName": { "type": "string" },
                  "subjectLine": { "type": "string" },
                  "htmlContent": { "type": "string" }
                }
              }
            }
          }
        },
        "responses": {
          "201": { "description": "Template created" }
        }
      }
    },
    "/email/send": {
      "post": {
        "summary": "Queue email for sending",
        "tags": ["Email Marketing"],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "userId": { "type": "string" },
                  "recipientEmail": { "type": "string" },
                  "subjectLine": { "type": "string" },
                  "htmlContent": { "type": "string" }
                }
              }
            }
          }
        },
        "responses": {
          "201": { "description": "Email queued" }
        }
      }
    },
    "/email/campaigns": {
      "get": {
        "summary": "Get email campaigns",
        "tags": ["Email Marketing"],
        "parameters": [
          {
            "name": "userId",
            "in": "query",
            "required": true,
            "schema": { "type": "string" }
          }
        ],
        "responses": {
          "200": { "description": "List of campaigns" }
        }
      },
      "post": {
        "summary": "Create email campaign",
        "tags": ["Email Marketing"],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "userId": { "type": "string" },
                  "campaignName": { "type": "string" },
                  "campaignType": { "type": "string" },
                  "templateId": { "type": "string" }
                }
              }
            }
          }
        },
        "responses": {
          "201": { "description": "Campaign created" }
        }
      }
    },
    "/email/analytics": {
      "get": {
        "summary": "Get email campaign analytics",
        "tags": ["Email Marketing"],
        "parameters": [
          {
            "name": "userId",
            "in": "query",
            "required": true,
            "schema": { "type": "string" }
          },
          {
            "name": "days",
            "in": "query",
            "schema": { "type": "integer", "default": 30 }
          }
        ],
        "responses": {
          "200": { "description": "Email analytics" }
        }
      }
    },
    "/segmentation/segments": {
      "get": {
        "summary": "Get customer segments",
        "tags": ["Segmentation & Analytics"],
        "parameters": [
          {
            "name": "userId",
            "in": "query",
            "required": true,
            "schema": { "type": "string" }
          }
        ],
        "responses": {
          "200": {
            "description": "List of segments",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": { "type": "string" },
                          "name": { "type": "string" },
                          "segmentType": { "type": "string" },
                          "memberCount": { "type": "integer" }
                        }
                      }
                    },
                    "total": { "type": "integer" }
                  }
                }
              }
            }
          }
        }
      },
      "post": {
        "summary": "Create customer segment",
        "tags": ["Segmentation & Analytics"],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "userId": { "type": "string" },
                  "name": { "type": "string" },
                  "segmentType": { "type": "string", "enum": ["behavioral", "rfm", "demographic", "cohort", "custom"] },
                  "description": { "type": "string" }
                }
              }
            }
          }
        },
        "responses": {
          "201": { "description": "Segment created" }
        }
      }
    },
    "/segmentation/events": {
      "post": {
        "summary": "Record customer behavior event",
        "tags": ["Segmentation & Analytics"],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "userId": { "type": "string" },
                  "customerId": { "type": "string" },
                  "eventType": { "type": "string" },
                  "eventCategory": { "type": "string" },
                  "productId": { "type": "string" },
                  "eventValue": { "type": "number" },
                  "deviceType": { "type": "string" }
                }
              }
            }
          }
        },
        "responses": {
          "201": { "description": "Event recorded" }
        }
      }
    },
    "/segmentation/analytics": {
      "get": {
        "summary": "Get segmentation analytics",
        "tags": ["Segmentation & Analytics"],
        "parameters": [
          {
            "name": "userId",
            "in": "query",
            "required": true,
            "schema": { "type": "string" }
          },
          {
            "name": "segmentId",
            "in": "query",
            "schema": { "type": "string" }
          },
          {
            "name": "days",
            "in": "query",
            "schema": { "type": "integer", "default": 30 }
          }
        ],
        "responses": {
          "200": { "description": "Analytics data" }
        }
      }
    },
    "/recommendations/generate": {
      "post": {
        "summary": "Generate product recommendations",
        "tags": ["Product Recommendations"],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "userId": { "type": "string" },
                  "customerId": { "type": "string" },
                  "context": { "type": "string", "default": "product_page" },
                  "maxRecommendations": { "type": "integer", "default": 5 }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Recommendations generated",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": { "type": "array" },
                    "total": { "type": "integer" }
                  }
                }
              }
            }
          }
        }
      },
      "get": {
        "summary": "Get stored recommendations",
        "tags": ["Product Recommendations"],
        "parameters": [
          {
            "name": "customerId",
            "in": "query",
            "required": true,
            "schema": { "type": "string" }
          },
          {
            "name": "context",
            "in": "query",
            "schema": { "type": "string" }
          }
        ],
        "responses": {
          "200": { "description": "Recommendations list" }
        }
      }
    },
    "/recommendations/track": {
      "post": {
        "summary": "Track recommendation click or conversion",
        "tags": ["Product Recommendations"],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "userId": { "type": "string" },
                  "customerId": { "type": "string" },
                  "recommendationId": { "type": "string" },
                  "productId": { "type": "string" },
                  "trackingType": { "type": "string", "enum": ["click", "conversion"] },
                  "deviceType": { "type": "string" },
                  "orderId": { "type": "string" },
                  "revenue": { "type": "number" }
                }
              }
            }
          }
        },
        "responses": {
          "201": { "description": "Event tracked" }
        }
      },
      "get": {
        "summary": "Get recommendation tracking data",
        "tags": ["Product Recommendations"],
        "parameters": [
          {
            "name": "customerId",
            "in": "query",
            "required": true,
            "schema": { "type": "string" }
          },
          {
            "name": "type",
            "in": "query",
            "required": true,
            "schema": { "type": "string", "enum": ["clicks", "conversions"] }
          },
          {
            "name": "days",
            "in": "query",
            "schema": { "type": "integer", "default": 30 }
          }
        ],
        "responses": {
          "200": { "description": "Tracking data" }
        }
      }
    },
    "/recommendations/analytics": {
      "get": {
        "summary": "Get recommendation analytics",
        "tags": ["Product Recommendations"],
        "parameters": [
          {
            "name": "userId",
            "in": "query",
            "required": true,
            "schema": { "type": "string" }
          },
          {
            "name": "productId",
            "in": "query",
            "schema": { "type": "string" }
          },
          {
            "name": "days",
            "in": "query",
            "schema": { "type": "integer", "default": 30 }
          }
        ],
        "responses": {
          "200": { "description": "Analytics data" }
        }
      }
    },
    "/orders": {
      "get": {
        "summary": "Get orders",
        "tags": ["Orders"],
        "parameters": [
          {
            "name": "customerId",
            "in": "query",
            "schema": { "type": "string" }
          },
          {
            "name": "status",
            "in": "query",
            "schema": { "type": "string" }
          }
        ],
        "responses": {
          "200": { "description": "Orders list" }
        }
      },
      "post": {
        "summary": "Create order",
        "tags": ["Orders"],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "customerId": { "type": "string" },
                  "items": { "type": "array" },
                  "subtotal": { "type": "number" },
                  "tax": { "type": "number" },
                  "total": { "type": "number" }
                }
              }
            }
          }
        },
        "responses": {
          "201": { "description": "Order created" }
        }
      }
    },
    "/customers": {
      "get": {
        "summary": "Get customers",
        "tags": ["Customers"],
        "responses": {
          "200": { "description": "Customers list" }
        }
      },
      "post": {
        "summary": "Create customer",
        "tags": ["Customers"],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "name": { "type": "string" },
                  "email": { "type": "string" },
                  "phone": { "type": "string" }
                }
              }
            }
          }
        },
        "responses": {
          "201": { "description": "Customer created" }
        }
      }
    },
    "/products": {
      "get": {
        "summary": "Get products",
        "tags": ["Products"],
        "parameters": [
          {
            "name": "category",
            "in": "query",
            "schema": { "type": "string" }
          },
          {
            "name": "limit",
            "in": "query",
            "schema": { "type": "integer" }
          }
        ],
        "responses": {
          "200": { "description": "Products list" }
        }
      },
      "post": {
        "summary": "Create product",
        "tags": ["Products"],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "name": { "type": "string" },
                  "category": { "type": "string" },
                  "price": { "type": "number" },
                  "sku": { "type": "string" }
                }
              }
            }
          }
        },
        "responses": {
          "201": { "description": "Product created" }
        }
      }
    }
  }
}
